(function(algolia){"use strict";if(!algolia.config.autocomplete_enabled)return;var algoliasearch=algolia.externals.algoliasearch,autocomplete=algolia.externals.autocomplete,aa=algolia.externals.aa,client=algoliasearch(algolia.config.app_id,algolia.config.search_api_key);function createMultiQuerySource(){let queue=[],lastResults=[],lastSearch=Promise.resolve();function requestSearch(index2){return Promise.resolve().then(()=>(queue.length&&(lastSearch=client.search(queue),queue=[]),lastSearch)).then(result=>(result&&(lastResults=result.results),lastResults[index2]))}return function(singleIndex,params,extendHits=null){return function(query,cb){const index2=queue.push({indexName:singleIndex.indexName,query,params})-1;requestSearch(index2).then(res=>{var extendedHits=[];return extendHits?extendedHits=extendHits(res):extendedHits=res.hits,cb(extendedHits,res)}).catch(err=>cb([],err))}}}var multiQuerySource=createMultiQuerySource();function index(name){return client.initIndex(""+algolia.config.index_prefix+name)}function autocompleteSection(config2,section){var params=config2[section],templates={empty:function(props){return algolia.render(params.templates.empty,algolia.assign({},props,{translations:algolia.translations}))},suggestion:function(hit){return algolia.render(params.templates.hit,algolia.assign({_distinct:params.distinct},hit,{translations:algolia.translations}))}};params.templates.footer&&(templates.footer=function(props,content){return content.nbHits<=params.hitsPerPage||!algolia.config.instant_search_enabled?null:algolia.render(params.templates.footer,{query:props.query,nbHits:content.nbHits,translations:algolia.translations,helpers:algolia.helpers})});var stockPolicyFilter=null;algolia.config.stock_policy&&section==="products"&&(algolia.config.stock_policy==="allow"||(algolia.config.stock_policy==="deny"?stockPolicyFilter="inventory_quantity > 0":algolia.config.stock_policy==="continue"&&(stockPolicyFilter="inventory_available:true")));var searchOpts={clickAnalytics:!0,hitsPerPage:params.hitsPerPage,highlightPreTag:'<span class="aa-highlight">',highlightPostTag:"</span>"};params.distinct&&(searchOpts.distinct=!0),stockPolicyFilter&&(searchOpts.filters=stockPolicyFilter);function extendHits(answer){return answer.hits.map(function(hit,i){return algolia.assign({},hit,{_position:i+1,_queryID:answer.queryID,_index:algolia.config.index_prefix+section})})}return{name:section,source:multiQuerySource(index(section),searchOpts,extendHits),displayKey:"title",templates}}function readjust($this,data){if(data){var $node=data.$node.get(0),$dropdown=data.dropdown.$menu.get(0),width=$this.offsetWidth,vpWidth=document.body.clientWidth,rect=$this.getBoundingClientRect(),offset={top:rect.top+document.body.scrollTop,left:rect.left+document.body.scrollLeft},left=offset.left,right=vpWidth-width-left,top=offset.top,height=$this.offsetHeight,align=left<right?"left":"right",dist=Math.min(left,right);4*dist>vpWidth&&(align="left",dist=Math.round(vpWidth/4));var newWidth=vpWidth-2*dist;width>=600&&(align="left",dist=left,newWidth=width),$node.style.left="",$node.style.right="",$node.style.top=top+height+8+"px",$node.style[align]=dist+"px",$node.style.width=newWidth+"px";var suffix="lg";newWidth<300?suffix="xs":newWidth<600?suffix="sm":newWidth<900&&(suffix="md"),$dropdown.classList.remove("aa-dropdown-menu-size-xs","aa-dropdown-menu-size-sm","aa-dropdown-menu-size-md","aa-dropdown-menu-size-lg","aa-dropdown-menu-size-lg"),$dropdown.classList.add("aa-dropdown-menu-size-"+suffix)}}var config={articles:{hitsPerPage:algolia.config.articles_autocomplete_hits_per_page,index:index("articles"),templates:{empty:algolia.compileTemplate("autocomplete_articles_empty"),hit:algolia.compileTemplate("autocomplete_article")}},pages:{hitsPerPage:algolia.config.pages_autocomplete_hits_per_page,index:index("pages"),templates:{empty:algolia.compileTemplate("autocomplete_pages_empty"),hit:algolia.compileTemplate("autocomplete_page")}},collections:{hitsPerPage:algolia.config.collections_autocomplete_hits_per_page,index:index("collections"),templates:{empty:algolia.compileTemplate("autocomplete_collections_empty"),hit:algolia.compileTemplate("autocomplete_collection")}},products:{distinct:algolia.config.show_products,hitsPerPage:algolia.config.products_autocomplete_hits_per_page,index:index("products"),templates:{empty:algolia.compileTemplate("autocomplete_products_empty"),footer:algolia.compileTemplate("autocomplete_footer"),hit:algolia.compileTemplate("autocomplete_product")}}};algolia.config.powered_by&&console.log("Algolia: Autocomplete"),algolia.appendStyle(algolia.render(algolia.compileTemplate("autocomplete.css"),{colors:algolia.config.colors}));var autocompleteInstance=autocomplete(algolia.config.input_selector+", .algolia-shopify-autocomplete",{debug:algolia.config.autocomplete_debug,hint:!1,appendTo:"body",templates:{dropdownMenu:algolia.render(algolia.compileTemplate("autocomplete"),{storeName:algolia.storeName,with:{articles:algolia.config.index_articles,collections:algolia.config.index_collections,pages:algolia.config.index_pages,footer:algolia.config.instant_search_enabled,poweredBy:algolia.config.powered_by,products:algolia.config.index_products}}),empty:"<div></div>"}},[algolia.config.index_collections&&autocompleteSection(config,"collections"),algolia.config.index_articles&&autocompleteSection(config,"articles"),algolia.config.index_pages&&autocompleteSection(config,"pages"),algolia.config.index_products&&autocompleteSection(config,"products")].filter(function(x){return!!x}));autocompleteInstance.each(function(i){var data=autocompleteInstance.eq(i).data("aaAutocomplete"),suggestionClass="."+data.dropdown.cssClasses.prefix+"-"+data.dropdown.cssClasses.suggestion,onSuggestionClick=data.dropdown._onSuggestionClick.bind(data.dropdown),touchmoved;data.dropdown.$menu.on("touchend",suggestionClass,function(e){touchmoved===!1&&(e.preventDefault(),e.stopPropagation(),onSuggestionClick.apply(this,arguments))}).on("touchmove",function(){touchmoved=!0}).on("touchstart",function(){touchmoved=!1})}),autocompleteInstance.on("autocomplete:selected",function(obj,datum,name){if(algolia.config.analytics_enabled){var clickData={index:datum._index,eventName:"click",queryID:datum._queryID,objectIDs:[datum.objectID],positions:[datum._position]};aa.clickedObjectIDsAfterSearch(clickData)}switch(name){case"products":{var addVariantId=!algolia.config.show_products&&datum.objectID!==datum.id;window.location.href="/"+name+"/"+datum.handle+(addVariantId?"?variant="+datum.objectID:"");break}case"articles":window.location.href="/blogs/"+datum.blog.handle+"/"+datum.handle;break;default:window.location.href="/"+name+"/"+datum.handle}}),autocompleteInstance.on("autocomplete:redrawn",function(){var that=this,i;autocompleteInstance.each(function(j,item){return item===that?(i=j,!1):!0}),readjust(this,autocompleteInstance.eq(i).data("aaAutocomplete"))}),window.addEventListener("resize",function(){autocompleteInstance.each(function(i){readjust(this,autocompleteInstance.eq(i).data("aaAutocomplete"))})})})(window.algoliaShopify);
//# sourceMappingURL=/cdn/shop/t/277/assets/algolia_autocomplete.js.map?v=3677026214013929861712148226
